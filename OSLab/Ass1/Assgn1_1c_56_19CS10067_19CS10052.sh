folders_to_del=$(find $1 -mindepth 1 -maxdepth 1 -type d); for filename in $(find $1 -type f);do echo $filename>>filename.txt;ext="Nil";if [[ $filename =~ "." ]];then ext=${filename#${filename%.*}.};fi;echo $ext>>extensions.txt;done;mkdir $1/Nil;grep -v ".*\..*" filename.txt|xargs mv -t $1/Nil;ext_list=$(sort extensions.txt|uniq);for extension in $ext_list;do mkdir -p $1/$extension;grep -e "\.$extension$" filename.txt|xargs mv -t $1/$extension;done;rm -r $folders_to_del